cellTotal = 0
cellsProcessed = 0

def ExposeCell(cellID):
	global cellTotal
	global cellsProcessed

	cellTotal += cellID
	cellsProcessed += 1


def simulate():
	global cellTotal

	try:
    		parent.execute_user_code()
	except Exception as e:
		if 'ExposeCell() takes exactly 1 argument' in repr(e):
			parent.end_simulation(4, repr(e))
		else: 
    			parent.end_simulation(-1, repr(e))
		return

	if cellTotal == 486591:
		environment.trigger_action_group(0)
		parent.end_simulation(0)
	elif cellTotal > 486591:
		parent.end_simulation(2)
	else:
		parent.end_simulation(3)

def simulate_tick():
	return 0