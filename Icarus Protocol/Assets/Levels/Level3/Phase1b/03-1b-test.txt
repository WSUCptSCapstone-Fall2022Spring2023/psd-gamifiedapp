coresAligned = 0
alignmentDelta = 50

coresAlignedBacking = 0
alignmentDeltaBacking = 50

errorCode = 0

def AdjustAlignment():
	global alignmentDeltaBacking
	global alignmentDelta
	global coresAlignedBacking
	global coresAligned

	alignmentDeltaBacking -= 1.5
	alignmentDelta = alignmentDeltaBacking
	parent.push_user_scope()

def NextCore():
	global coresAlignedBacking
	global coresAligned
	global alignmentDeltaBacking
	global alignmentDelta
	
	if alignmentDeltaBacking > 0:
		errorCode = 1
	else:
		coresAlignedBacking += 1
		coresAligned = coresAlignedBacking
		alignmentDeltaBacking = 50
		alignmentDelta = alignmentDeltaBacking
		parent.push_user_scope()

def simulate():
	global errorCode
	global coresAlignedBacking

	try:
    		parent.execute_user_code()
	except Exception as e:
		parent.end_simulation(-1, repr(e))
		return 

	if errorCode == 1:
		parent.end_simulation(1)
	elif coresAlignedBacking < 40:
		parent.end_simulation(2)
	else:
		parent.end_simulation(0)

def simulate_tick():
	return 0