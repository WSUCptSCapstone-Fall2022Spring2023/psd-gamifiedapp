hiddenValue = 0
totalCalls = 0

def AdvanceValue(neededValue):
	global hiddenValue
	global totalCalls
	if hiddenValue == neededValue:
		hiddenValue += 1
	totalCalls += 1

def Compress():
	AdvanceValue(3)

def Defer():
	AdvanceValue(1)

def Deploy():
	AdvanceValue(4)

def Inject():
	AdvanceValue(2)

def Prime():
	AdvanceValue(0)

def simulate():
	global hiddenValue
	global totalCalls

	try:
		parent.execute_user_code()
	except Exception: 
		pass
	
	if hiddenValue == 5:
		parent.end_simulation(0)
	elif totalCalls < 5:
		parent.end_simulation(1)
	else:
		parent.end_simulation(2)

def simulate_tick():
	return 0