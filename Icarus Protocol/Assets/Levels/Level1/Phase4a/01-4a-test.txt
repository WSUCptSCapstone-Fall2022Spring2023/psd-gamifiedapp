ventIsolated = False
powerSurged = False
errorCode = 0

def IsolateVent(vent):
	global errorCode
	global ventIsolated

	if vent != "HV-67":
		errorCode = 1
	else:
		environment.trigger_action_group(0)

	ventIsolated = True
	return 0
	
def SurgePower(num):
	global errorCode
	global powerSurged

	if num > 76 or num < 73:
		errorCode = 2
	if type(num) != int and type(num) != float:
		errorCode = 3
	
	powerSurged = True
	return 0

def simulate():
	global powerSurged
	global ventIsolated
	global errorCode

	try:
    		parent.execute_user_code()
	except Exception as e: 
		if "name 'HV' is not defined" in repr(e):
			parent.end_simulation(5)
		else:
    			parent.end_simulation(-1, repr(e))
		return

	if errorCode == 0:
		if ventIsolated is True and powerSurged is True:
			environment.trigger_action_group(1)
			parent.end_simulation(0)
		else:
			parent.end_simulation(1)
	elif errorCode == 1:
		parent.end_simulation(2)
	elif errorCode == 2:
		parent.end_simulation(3)
	elif errorCode == 3:
		parent.end_simulation(4)

	return 0

def simulate_tick():
	return 0