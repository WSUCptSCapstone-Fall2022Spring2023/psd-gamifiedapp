coolant = 5.8172153
hiddenCoolant = 5.8172153
liquid = 0

mixCoolantCalled = False

def MixCoolant():
	global mixCoolantCalled

	mixCoolantCalled = True
	
def simulate():
	global mixCoolantCalled
	global coolant
	global hiddenCoolant
	global liquid

	try:
    		parent.execute_user_code()
	except Exception as e: 
		if "unexpected token 'x'" in repr(e):
			parent.end_simulation(4)
    		else:
			parent.end_simulation(-1, repr(e))
		return

	parent.pull_user_scope()

	if mixCoolantCalled:
		environment.trigger_action_group(0)
		if coolant != hiddenCoolant:
			parent.end_simulation(3)
		elif liquid == 11 * hiddenCoolant:
			parent.end_simulation(0)
		else:
			parent.end_simulation(2)
	else:
		parent.end_simulation(1)

def simulate_tick():
	return 0