heat = 100
venting = False
timer = 0
ventAmount = 0

def VentHeat(amount, time):
	global timer
	global venting
	global ventAmount

	environment.trigger_action_group(0)
	timer = time
	venting = True
	ventAmount = amount

def simulate():
	global venting
	try:
    		parent.execute_user_code()
	except Exception as e: 
		if "name 'amount' is not defined" in repr(e) or "name 'time' is not defined" in repr(e):
			parent.end_simulation(4)
		elif "VentHeat() takes exactly 2 arguments" in repr(e):
			parent.end_simulation(5)
		else:
    			parent.end_simulation(-1, repr(e))
		return

	if not venting:
		environment.trigger_action_group(1)
		parent.end_simulation(1)

def simulate_tick():
	global timer
	global heat
	global venting
	global ventAmount

	if venting:
		heat -= 0.05 * ventAmount
		timer -= 0.05	

	if timer < 0 and venting == True:
		environment.trigger_action_group(1)
		if heat > 85 and heat < 87:
			parent.end_simulation(0)
		else:
			if heat >= 87:
				parent.end_simulation(2)	
			else:
				parent.end_simulation(3)
	return 0